function displayItemBox(e,i){var t=$(".item-box:last").clone().removeClass("hidden");$('input[type="hidden"]',t).attr("name",i+"s[]").val(e.id),$("select",t).attr("name",i+"s_count[]"),$(".picture",t).attr("src","/assets/img/"+i+"s/57x57/"+e.picture),$(".name",t).text(e.name),$(".range",t).text(e.range_name),$(".serie",t).text(e.serie_name),$(".item-box-container."+i).append(t)}function displayPriceField(){!$("#type-sell").prop("checked")&&$("#type-exchange").prop("checked")?$('#price, label[for="price"]').hide():$('#price, label[for="price"]').show()}$(document).ready(function(){$(".offers-view").length&&($(".slider-for").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".slider-navigation"}),$(".slider-navigation").slick({slidesToShow:4,slidesToScroll:1,asNavFor:".slider-for",focusOnSelect:!0})),($(".offers-add").length||$(".offers-edit").length)&&(displayPriceField(),$("#type-sell, #type-exchange").on("change",function(){displayPriceField()}),$("#minifigures").on("change",function(e){$.ajax({url:"/offers/find",data:"id="+$(this).val()+"&type=minifigure",dataType:"json",success:function(e){e!==!1&&($("#minifigures").find('option[value="'+e.id+'"]').prop("disabled",!0),displayItemBox(e,"minifigure"),$("#minifigures").val(""))}})}),$("#sets").on("change",function(e){$.ajax({url:"/offers/find",data:"id="+$(this).val()+"&type=set",dataType:"json",success:function(e){e!==!1&&($("#sets").find('option[value="'+e.id+'"]').prop("disabled",!0),displayItemBox(e,"set"),$("#sets").val(""))}})}),$("body").on("click",".item-box .action",function(){var e=$(this).parents(".item-box").find('input[type="hidden"]').val(),i=$(this).parents(".item-box").find('input[type="hidden"]').attr("name").replace("[]","");$("#"+i).find('option[value="'+e+'"]').prop("disabled",!1),$(this).parents(".item-box").remove()}),$(".add-picture-link").on("click",function(e){e.preventDefault();var i=$(".input-file-container:last").clone(),t=i.find(".picture"),n=parseInt(t.prop("id").match(/\d+/g),10)+1,a=$("input[type=checkbox].delete-picture").length,c=$("input[type=checkbox].delete-picture:checked").length,o=a-c;4-o>n&&($(".picture",i).attr("id","picture-"+n),$(".input-file-return",i).val(""),$(this).parents().siblings(".input-file-container:last").after(i),$(".input-file-container:last").each(function(){customInputFile($(this))})),n==3-o&&$(this).parents("p").hide()}),$("input[type=checkbox].delete-picture").length&&$("input[type=checkbox].delete-picture").on("change",function(){var e=4,i=$("input[type=checkbox].delete-picture").length,t=$("input[type=checkbox].delete-picture:checked").length,n=i-t,a=e-n,c=$("input.picture").length;4==i&&0==t?$(".add-picture-container").addClass("hidden"):$(".add-picture-container").removeClass("hidden"),c>a&&(1==$(".input-file-container").length?$(".input-file-container").hide():$(".input-file-container:last").remove()),c==a?(1==$(".input-file-container").length&&$(".input-file-container").show(),i==e&&1==t&&$("#addPictureLink").hide()):a>c?$("#addPictureLink").show():$("#addPictureLink").hide()}))}),$(window).load(function(){});